<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pie Chart</title>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
</head>
<body>
<div id="pieExample"></div>
<script>
  //Make new trace where:
  //seperate by zone
  //look over living cover codes
  //is that code in trace? if not, add (as a header)
  //if it is, add to count
  //Graphing:
  //use headers as labels
  //use count as value 
  Plotly.d3.csv('https://raw.githubusercontent.com/team-reef-me-alone/marine-benthic-classification/plotlyPie/benthicclassification.csv', function(err, rows){

    function makeplot() {
      Plotly.d3.csv("https://raw.githubusercontent.com/team-reef-me-alone/marine-benthic-classification/plotlyPie/livingCoverCodes.csv", function(data){ processData(data) } );
    };


    //sg,ns,sc,ca,cc,ma,ta,ua,ev,gc,nm,no
    function unpack(rows, key) {
      return rows.map(function(row) { return row[key]; });

    }

    var zones = unpack(rows,'Zone');
    var types = unpack(rows, 'Livingcover');
    console.log(zones);

    var info = [zones,types];
    var labelA = ["Macroalgae", "Turf Algae", "None", "rubble"];
    var labelB = ["non-scleractinian coral", "Macroalgae", "Turf Algae", "None", "scleractinian coral"]

    console.log(info);

    var dataA = [{
      labels: labelA,
      values: [103, 49, 806, 1 ],
      type: 'pie'

    }];
    var dataB = [{
      labels: labels,
      values: [15,256, 97, 621],
      type: 'pie'

    }]

    var layout = {
      height: 500,
      width: 500
    };

    Plotly.newPlot('pieExample', dataA, layout);

  });
</script>
</body>
</html>